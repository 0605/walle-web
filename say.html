<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>

<script>
var ws = new WebSocket('ws://localhost:8888/aso');
ws.onmessage = function(event) {
    var table = document.getElementById('message');
    var data = eval('(' + event.data + ')');
    ({
        'sys': function() {
            $('#console').append('<div class="console-item">' + data['command'] + '<br>' + data['message'] + '</div>')
        },
        'user': function() {
            $('#console').append('<div class="console-item">' + data['command'] + '<br>' + data['message'] + '</div>')

//            var row = table.insertRow();
//            row.insertCell().innerHTML = data['message'];
//            row.insertCell().innerHTML = data['id'];
        },
    }[data['type']])();
};
function send() {
    ws.send(document.getElementById('chat').value);
    document.getElementById('chat').value = '';
}
</script>
</head>
<body>
<input id='chat' onkeydown='if(event.keyCode==13){send()}'><button onclick='send()'>Send</button>
<table id='message' border='1'></table>
<div id="console">
    <div class="console-item">init console</div>
</div>